# AI ìŠ¤í”¼ì»¤ IoT ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ê°œë°œì ë¬¸ì„œ

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

ìš°ë¦¬ê°€ ë§Œë“œëŠ” AI ìŠ¤í”¼ì»¤ëŠ” ë‹¨ìˆœí•œ ëª…ë ¹ ìˆ˜í–‰ ë„êµ¬ê°€ ì•„ë‹Œ, **ì‚¬ìš©ìì™€ í•¨ê»˜ ìƒí™œí•˜ëŠ” ì§€ëŠ¥í˜• ë™ë°˜ì**ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ í–‰ë™ íŒ¨í„´ì„ í•™ìŠµí•˜ê³ , í•„ìš”í•œ ìˆœê°„ì— ë¨¼ì € ë§ì„ ê±¸ë©°, ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”ë¥¼ í†µí•´ ì¼ìƒì„ ë„ì™€ì¤ë‹ˆë‹¤.

### í•µì‹¬ ì°¨ë³„ì 
- **ì„ ì œì  ëŒ€í™”(Proactive Interaction)**: "ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”! ì˜¤ëŠ˜ì€ ë¹„ê°€ ì˜¬ ì˜ˆì •ì´ë‹ˆ ìš°ì‚° ì±™ê¸°ì„¸ìš”"
- **ì»¨í…ìŠ¤íŠ¸ ì´í•´(Contextual Understanding)**: ëŒ€í™”ì˜ ë§¥ë½ì„ ê¸°ì–µí•˜ê³  ìì—°ìŠ¤ëŸ½ê²Œ ì´ì–´ê°
- **í”ŒëŸ¬ê·¸ì¸ í™•ì¥ì„±(Plugin Architecture)**: ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì‰½ê²Œ ì¶”ê°€

---

## ğŸ“‹ MVP ì•„í‚¤í…ì²˜ (3ê°œì›” ëª©í‘œ)

### 1. Device Layer (ë¼ì¦ˆë² ë¦¬íŒŒì´)

**ì£¼ìš” ì»´í¬ë„ŒíŠ¸ì™€ ì—­í• :**

```python
# Wake Word Detection ì˜ˆì‹œ
def detect_wake_word(audio_stream):
    if porcupine.process(audio_stream) >= 0:
        # "í—¤ì´ ìŠ¤í”¼ì»¤" ê°ì§€ë¨
        mqtt_client.publish("device/wake", {"timestamp": now()})
```

- **Audio I/O**: ë§ˆì´í¬ë¡œ ìŒì„±ì„ ìˆ˜ì§‘í•˜ê³  ìŠ¤í”¼ì»¤ë¡œ ì¬ìƒ
- **Wake Word Detection**: ë¡œì»¬ì—ì„œ íŠ¸ë¦¬ê±° ì›Œë“œ ê°ì§€ (ë„¤íŠ¸ì›Œí¬ ì—†ì–´ë„ ë™ì‘)
- **Motion Sensor**: ì‚¬ìš©ì ì›€ì§ì„ ê°ì§€í•˜ì—¬ ì„ ì œì  ëŒ€í™” íŠ¸ë¦¬ê±°
- **MQTT Client**: ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ ë°±ì—”ë“œë¡œ ì „ì†¡

### 2. Backend Services (Spring Boot)

**í•µì‹¬ ì„œë¹„ìŠ¤ íë¦„:**

```java
// Dialog Managerì˜ í•µì‹¬ ë¡œì§
@Service
public class DialogManager {
    public DialogResponse process(UserInput input) {
        // 1. í˜„ì¬ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ë¡œë“œ
        Context context = contextEngine.getContext(input.getUserId());
        
        // 2. ì˜ë„ íŒŒì•… (Dialogflow ì—°ë™)
        Intent intent = nlpService.analyzeIntent(input.getText());
        
        // 3. ì ì ˆí•œ í”ŒëŸ¬ê·¸ì¸ ì„ íƒ ë° ì‹¤í–‰
        Plugin plugin = pluginManager.selectPlugin(intent);
        PluginResponse response = plugin.execute(context, intent);
        
        // 4. ì»¨í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        contextEngine.updateContext(input.getUserId(), response);
        
        return response;
    }
}
```

**í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ:**
- ê° ê¸°ëŠ¥ì€ ë…ë¦½ì ì¸ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ êµ¬í˜„
- ì¸í„°í˜ì´ìŠ¤ë§Œ êµ¬í˜„í•˜ë©´ ìë™ìœ¼ë¡œ ì‹œìŠ¤í…œì— í†µí•©
- MVPì—ëŠ” Weather, Time, Greeting í”ŒëŸ¬ê·¸ì¸ í¬í•¨

### 3. AI/ML Services

ì´ˆê¸°ì—ëŠ” Google Cloud ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ë¹ ë¥´ê²Œ í”„ë¡œí† íƒ€ì… êµ¬ì¶•:
- **STT**: ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜
- **Dialogflow**: ì˜ë„ì™€ ì—”í‹°í‹° ì¶”ì¶œ
- **TTS**: ì‘ë‹µì„ ìì—°ìŠ¤ëŸ¬ìš´ ìŒì„±ìœ¼ë¡œ ë³€í™˜

### 4. ë°ì´í„° íë¦„ ì‹œë‚˜ë¦¬ì˜¤

**ì•„ì¹¨ ì¸ì‚¬ ì‹œë‚˜ë¦¬ì˜¤:**
1. Motion Sensorê°€ ì•„ì¹¨ 7ì‹œì— ì›€ì§ì„ ê°ì§€
2. MQTTë¡œ "user_motion" ì´ë²¤íŠ¸ ì „ì†¡
3. Context Engineì´ "ì•„ì¹¨ + ì²« ì›€ì§ì„" íŒ¨í„´ ì¸ì‹
4. Dialog Managerê°€ Greeting Plugin í˜¸ì¶œ
5. Weather Pluginë„ í•¨ê»˜ í˜¸ì¶œí•˜ì—¬ ë‚ ì”¨ ì •ë³´ í¬í•¨
6. "ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”! ì˜¤ëŠ˜ì€ ë§‘ì€ ë‚ ì”¨ë„¤ìš”" ìŒì„± ì¶œë ¥

---

## ğŸš€ í™•ì¥ IoT ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜

### 1. Edge Computing Layer

MVPì˜ ë¼ì¦ˆë² ë¦¬íŒŒì´ê°€ ê°•ë ¥í•œ ì—£ì§€ í—ˆë¸Œë¡œ ì§„í™”:
- **Local AI Engine**: ì¸í„°ë„· ì—°ê²° ì—†ì´ë„ ê¸°ë³¸ ëŒ€í™” ê°€ëŠ¥
- **Device Controller**: Matter/Thread í”„ë¡œí† ì½œë¡œ ëª¨ë“  ìŠ¤ë§ˆíŠ¸ ê¸°ê¸° í†µí•©
- **Edge TPU**: ë¡œì»¬ì—ì„œ AI ëª¨ë¸ ì‹¤í–‰ìœ¼ë¡œ ì‘ë‹µ ì†ë„ í–¥ìƒ

### 2. Microservices Architecture

ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°:

```yaml
# Kubernetes ë°°í¬ ì˜ˆì‹œ
apiVersion: apps/v1
kind: Deployment
metadata:
  name: dialog-orchestrator
spec:
  replicas: 3  # íŠ¸ë˜í”½ì— ë”°ë¼ ìë™ ìŠ¤ì¼€ì¼ë§
  template:
    spec:
      containers:
      - name: dialog-service
        image: ai-speaker/dialog:v2.0
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
```

### 3. ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜

Apache Kafkaë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ëª¨ë“  ì´ë²¤íŠ¸ê°€ íë¥´ëŠ” êµ¬ì¡°:

```java
// ì´ë²¤íŠ¸ ë°œí–‰ ì˜ˆì‹œ
@EventListener
public void onUserActivity(UserActivityEvent event) {
    // ì—¬ëŸ¬ ì„œë¹„ìŠ¤ê°€ ë™ì‹œì— ì´ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬
    kafkaTemplate.send("user-activity", event);
}

// Context Serviceì—ì„œ êµ¬ë…
@KafkaListener(topics = "user-activity")
public void handleUserActivity(UserActivityEvent event) {
    // ì‚¬ìš©ì íŒ¨í„´ í•™ìŠµ ë° ì»¨í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
    updateUserContext(event);
}
```

### 4. í”ŒëŸ¬ê·¸ì¸ ìƒíƒœê³„

ì„œë“œíŒŒí‹° ê°œë°œìë„ í”ŒëŸ¬ê·¸ì¸ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” SDK ì œê³µ:

```java
// ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ ì˜ˆì‹œ
@Plugin(name = "smart-recipe")
public class SmartRecipePlugin implements ConversationPlugin {
    @Override
    public PluginResponse process(Context context, Intent intent) {
        // ëƒ‰ì¥ê³  ìƒíƒœ í™•ì¸
        List<Food> available = getFridgeContents(context.getUserId());
        
        // AIë¡œ ë ˆì‹œí”¼ ì¶”ì²œ
        Recipe recipe = recommendRecipe(available);
        
        return PluginResponse.builder()
            .speech("ëƒ‰ì¥ê³ ì— ìˆëŠ” ì¬ë£Œë¡œ " + recipe.getName() + " ë§Œë“¤ì–´ë³´ëŠ” ê±´ ì–´ë– ì„¸ìš”?")
            .action(DisplayRecipeAction.of(recipe))
            .build();
    }
}
```

### 5. AI/ML Platform

ìì²´ AI ëª¨ë¸ í•™ìŠµ ë° ë°°í¬ íŒŒì´í”„ë¼ì¸:
- **MLflow**: ëª¨ë¸ ë²„ì „ ê´€ë¦¬ ë° A/B í…ŒìŠ¤íŠ¸
- **Kubeflow**: ëŒ€ê·œëª¨ ëª¨ë¸ í•™ìŠµ ìë™í™”
- **Personalization Engine**: ì‚¬ìš©ìë³„ ë§ì¶¤ ì‘ë‹µ ìƒì„±

---

## ğŸ”„ í•µì‹¬ ë°ì´í„° íë¦„

### 1. ì‹¤ì‹œê°„ ëŒ€í™” ì²˜ë¦¬ (< 300ms ëª©í‘œ)
```
ì‚¬ìš©ì ìŒì„± â†’ Edge STT â†’ Intent ë¶„ì„ â†’ 
Plugin ì‹¤í–‰ â†’ Response ìƒì„± â†’ Edge TTS â†’ ìŒì„± ì¶œë ¥
```

### 2. ì„ ì œì  ëŒ€í™” íŠ¸ë¦¬ê±°
```
ì„¼ì„œ ë°ì´í„° â†’ Pattern ì¸ì‹ â†’ Context í™•ì¸ â†’ 
Proactive Rule ë§¤ì¹­ â†’ ëŒ€í™” ì‹œì‘
```

### 3. í•™ìŠµ ë° ê°œì„  ë£¨í”„
```
ì‚¬ìš©ì í”¼ë“œë°± â†’ Analytics ìˆ˜ì§‘ â†’ Pattern ë¶„ì„ â†’ 
Model ì¬í•™ìŠµ â†’ A/B í…ŒìŠ¤íŠ¸ â†’ ë°°í¬
```

---

## ğŸ‘¨â€ğŸ’» ê°œë°œ ì‹œì‘ ê°€ì´ë“œ

### 1. MVP ê°œë°œ í™˜ê²½ ì„¤ì •

```bash
# 1. ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ì‹¤í–‰
cd backend
./gradlew bootRun

# 2. Redis ì‹¤í–‰ (Docker)
docker run -d -p 6379:6379 redis:alpine

# 3. ë¼ì¦ˆë² ë¦¬íŒŒì´ í´ë¼ì´ì–¸íŠ¸
cd raspberry-pi
pip install -r requirements.txt
python main.py
```

### 2. ì²« ë²ˆì§¸ í”ŒëŸ¬ê·¸ì¸ ë§Œë“¤ê¸°

```java
@Component
public class MyFirstPlugin implements ConversationPlugin {
    @Override
    public String getName() {
        return "my-plugin";
    }
    
    @Override
    public List<String> getSupportedIntents() {
        return Arrays.asList("greeting", "farewell");
    }
    
    @Override
    public PluginResponse process(Context context, Intent intent) {
        // ì—¬ê¸°ì— ë¡œì§ êµ¬í˜„
        return PluginResponse.of("ì•ˆë…•í•˜ì„¸ìš”!");
    }
}
```

### 3. í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹…

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
./gradlew test

# í†µí•© í…ŒìŠ¤íŠ¸ (Docker Compose ì‚¬ìš©)
docker-compose up -d
./gradlew integrationTest

# ë¡œê·¸ í™•ì¸
kubectl logs -f deployment/dialog-orchestrator
```

---

## ğŸ“ˆ ì„±ëŠ¥ ëª©í‘œ ë° ëª¨ë‹ˆí„°ë§

### MVP ëª©í‘œ
- ìŒì„± ì‘ë‹µ ì‹œê°„: < 2ì´ˆ
- ë™ì‹œ ì‚¬ìš©ì: 10ëª…
- ê°€ìš©ì„±: 95%

### í™•ì¥ ì„œë¹„ìŠ¤ ëª©í‘œ
- ìŒì„± ì‘ë‹µ ì‹œê°„: < 300ms (Edge AI í™œìš©)
- ë™ì‹œ ì‚¬ìš©ì: 10,000ëª…
- ê°€ìš©ì„±: 99.9%

### ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
- **Grafana**: ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­
- **ELK Stack**: ëŒ€í™” ë¡œê·¸ ë¶„ì„
- **Custom Dashboard**: ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ ì‹œê°í™”

---

## ğŸ“ í•™ìŠµ ë¡œë“œë§µ

### 1ë‹¨ê³„ (í˜„ì¬ ìˆ˜ì¤€ì—ì„œ ì‹œì‘)
- Spring Boot ì‹¬í™” (WebFlux, Cloud)
- Docker & Docker Compose
- MQTT í”„ë¡œí† ì½œ ì´í•´

### 2ë‹¨ê³„ (MVP ê°œë°œ ì¤‘)
- Kubernetes ê¸°ì´ˆ
- Apache Kafka
- Redis ê³ ê¸‰ ê¸°ëŠ¥

### 3ë‹¨ê³„ (í™•ì¥ ì„œë¹„ìŠ¤)
- ë¶„ì‚° ì‹œìŠ¤í…œ ì„¤ê³„
- ML íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
- Edge Computing

---

## ğŸ’¡ ê°œë°œ íŒ

1. **ì‘ê²Œ ì‹œì‘í•˜ì„¸ìš”**: Weather Plugin í•˜ë‚˜ë§Œ ì™„ë²½í•˜ê²Œ ë§Œë“¤ì–´ë³´ì„¸ìš”
2. **ë¡œê·¸ë¥¼ ì¶©ë¶„íˆ ë‚¨ê¸°ì„¸ìš”**: ëŒ€í™” íë¦„ì„ ì¶”ì í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤
3. **í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”**: íŠ¹íˆ í”ŒëŸ¬ê·¸ì¸ ì¸í„°í˜ì´ìŠ¤ëŠ” ì² ì €íˆ í…ŒìŠ¤íŠ¸
4. **ì‚¬ìš©ì í”¼ë“œë°±ì„ ìˆ˜ì§‘í•˜ì„¸ìš”**: ì‹¤ì œ ì‚¬ìš© íŒ¨í„´ì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ê°€ ì§„í™”í•¨ì— ë”°ë¼ ê³„ì† ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤. ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì‚¬í•­ì´ ìˆë‹¤ë©´ ì–¸ì œë“  ê³µìœ í•´ì£¼ì„¸ìš”!