# AI Speaker MVP ê°œë°œ í”Œë¡œìš° ê°€ì´ë“œ

## ğŸ“ ë©˜í† ì˜ ê´€ì : ê±°ì‹œì  ë°©í–¥ì„±

### ì „ì²´ ê°œë°œ ì² í•™
```
"ì‘ë™í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë²„ì „ë¶€í„° ì‹œì‘í•˜ì—¬ ì ì§„ì ìœ¼ë¡œ ê°œì„ í•˜ë¼"

1ë‹¨ê³„: Make it Work (ì‘ë™í•˜ê²Œ ë§Œë“¤ê¸°)
2ë‹¨ê³„: Make it Right (ì˜¬ë°”ë¥´ê²Œ ë§Œë“¤ê¸°)  
3ë‹¨ê³„: Make it Fast (ë¹ ë¥´ê²Œ ë§Œë“¤ê¸°)
```

### ì•„í‚¤í…ì²˜ ì›ì¹™
1. **Separation of Concerns**: ê° ì»´í¬ë„ŒíŠ¸ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ
2. **Dependency Inversion**: êµ¬ì²´ì ì¸ êµ¬í˜„ì´ ì•„ë‹Œ ì¶”ìƒí™”ì— ì˜ì¡´
3. **Open/Closed Principle**: í™•ì¥ì—ëŠ” ì—´ë ¤ìˆê³  ìˆ˜ì •ì—ëŠ” ë‹«í˜€ìˆê²Œ
4. **YAGNI**: ì§€ê¸ˆ í•„ìš”í•˜ì§€ ì•Šì€ ê²ƒì€ ë§Œë“¤ì§€ ì•Šê¸°

## ğŸ“‹ ê°œë°œ ì‹œë‚˜ë¦¬ì˜¤ (8ì£¼ ê³„íš)

### Week 1-2: ê¸°ë°˜ êµ¬ì¶•
**"ì•ˆë…•í•˜ì„¸ìš”"ë¼ê³  ë§í•˜ë©´ "ì•ˆë…•í•˜ì„¸ìš”!"ë¼ê³  ëŒ€ë‹µí•˜ëŠ” ê²ƒë¶€í„°**

#### Day 1-3: ê°œë°œ í™˜ê²½ ì„¤ì •
```bash
# 1. í”„ë¡œì íŠ¸ ìƒì„±
spring init --dependencies=web,data-mongodb,data-redis,validation \
  --build=gradle --java-version=17 ai-speaker-backend

# 2. ë¼ì¦ˆë² ë¦¬íŒŒì´ í™˜ê²½
ssh pi@raspberrypi.local
sudo apt-get update && sudo apt-get upgrade
python3 -m venv venv
source venv/bin/activate

# 3. ë¡œì»¬ ì¸í”„ë¼
docker-compose up -d mongodb redis mosquitto
```

#### Day 4-7: ì²« ë²ˆì§¸ End-to-End ì—°ê²°
```java
// SimplestDialogController.java
@RestController
public class SimplestDialogController {
    @PostMapping("/dialog")
    public Map<String, String> processDialog(@RequestBody Map<String, String> request) {
        String input = request.get("text");
        String response = input.contains("ì•ˆë…•") ? "ì•ˆë…•í•˜ì„¸ìš”!" : "ë¬´ìŠ¨ ë§ì¸ì§€ ëª¨ë¥´ê² ì–´ìš”";
        return Map.of("speech", response);
    }
}
```

```python
# simplest_client.py
import requests

def process_voice(text):
    response = requests.post('http://localhost:8080/dialog', 
                           json={'text': text})
    return response.json()['speech']

# í…ŒìŠ¤íŠ¸
print(process_voice("ì•ˆë…•í•˜ì„¸ìš”"))  # "ì•ˆë…•í•˜ì„¸ìš”!"
```

**ğŸ¯ ëª©í‘œ: ì „ì²´ íŒŒì´í”„ë¼ì¸ì´ ì—°ê²°ë˜ì—ˆìŒì„ í™•ì¸**

### Week 3-4: í•µì‹¬ êµ¬ì¡° êµ¬í˜„

#### Context ì‹œìŠ¤í…œ êµ¬ì¶•
```java
// 1ë‹¨ê³„: ê°„ë‹¨í•œ ë©”ëª¨ë¦¬ ê¸°ë°˜ ì»¨í…ìŠ¤íŠ¸
@Component
public class SimpleContextEngine {
    private final Map<String, ConversationContext> contexts = new ConcurrentHashMap<>();
    
    public ConversationContext getContext(String sessionId) {
        return contexts.computeIfAbsent(sessionId, k -> new ConversationContext());
    }
}

// 2ë‹¨ê³„: Redis ì¶”ê°€
@Component
public class RedisContextEngine {
    @Autowired
    private RedisTemplate<String, ConversationContext> redisTemplate;
    
    public ConversationContext getContext(String sessionId) {
        String key = "context:" + sessionId;
        ConversationContext context = redisTemplate.opsForValue().get(key);
        
        if (context == null) {
            context = new ConversationContext();
            redisTemplate.opsForValue().set(key, context, Duration.ofHours(1));
        }
        
        return context;
    }
}
```

#### Plugin ì‹œìŠ¤í…œ êµ¬í˜„
```java
// 1ë‹¨ê³„: í•˜ë“œì½”ë”©ëœ í”ŒëŸ¬ê·¸ì¸
@Component
public class TimePlugin implements ConversationPlugin {
    @Override
    public boolean canHandle(String intent) {
        return "time.query".equals(intent);
    }
    
    @Override
    public PluginResponse execute(Intent intent, ConversationContext context) {
        String currentTime = LocalTime.now().format(DateTimeFormatter.ofPattern("HHì‹œ mmë¶„"));
        return PluginResponse.of("ì§€ê¸ˆì€ " + currentTime + "ì…ë‹ˆë‹¤.");
    }
}

// 2ë‹¨ê³„: ë™ì  í”ŒëŸ¬ê·¸ì¸ ë¡œë”©
@Component
public class PluginManager {
    @Autowired
    private List<ConversationPlugin> plugins;  // Springì´ ìë™ìœ¼ë¡œ ëª¨ë“  í”ŒëŸ¬ê·¸ì¸ ì£¼ì…
    
    public ConversationPlugin selectPlugin(Intent intent) {
        return plugins.stream()
            .filter(p -> p.canHandle(intent.getName()))
            .findFirst()
            .orElse(null);
    }
}
```

### Week 5-6: ì‹¤ì œ ì„œë¹„ìŠ¤ í†µí•©

#### ì™¸ë¶€ API ì—°ë™ (Weather Plugin)
```java
// ì ì§„ì  ê°œë°œ ê³¼ì •
public class WeatherPluginDevelopment {
    
    // Step 1: Mock ë°ì´í„°ë¡œ ì‹œì‘
    public String getWeather(String location) {
        return "ë§‘ìŒ, 23ë„";  // í•˜ë“œì½”ë”©
    }
    
    // Step 2: ì‹¤ì œ API ì—°ë™
    public String getWeather(String location) {
        RestTemplate restTemplate = new RestTemplate();
        String url = "http://api.openweathermap.org/data/2.5/weather?q=" + location;
        Map response = restTemplate.getForObject(url, Map.class);
        return parseWeatherResponse(response);
    }
    
    // Step 3: ì—ëŸ¬ ì²˜ë¦¬ ì¶”ê°€
    public String getWeather(String location) {
        try {
            // API í˜¸ì¶œ
        } catch (RestClientException e) {
            log.error("Weather API failed", e);
            return "ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤";
        }
    }
    
    // Step 4: ìºì‹± ì¶”ê°€
    @Cacheable(value = "weather", key = "#location")
    public String getWeather(String location) {
        // API í˜¸ì¶œ (ìºì‹œ ë¯¸ìŠ¤ì‹œì—ë§Œ ì‹¤í–‰)
    }
    
    // Step 5: Circuit Breaker ì¶”ê°€
    @CircuitBreaker(name = "weather-api", fallbackMethod = "getWeatherFallback")
    public String getWeather(String location) {
        // API í˜¸ì¶œ
    }
}
```

### Week 7-8: í”„ë¡œì•¡í‹°ë¸Œ ê¸°ëŠ¥

#### ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œ
```java
// 1. ê°„ë‹¨í•œ ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ì‹œì‘
@Component
public class ProactiveGreeting {
    @Scheduled(cron = "0 0 7 * * *")  // ë§¤ì¼ ì•„ì¹¨ 7ì‹œ
    public void morningGreeting() {
        // ëª¨ë“  í™œì„± ë””ë°”ì´ìŠ¤ì— ì¸ì‚¬
        deviceManager.getActiveDevices().forEach(device -> {
            speaker.speak("ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”!");
        });
    }
}

// 2. ì¡°ê±´ ê¸°ë°˜ìœ¼ë¡œ ë°œì „
@Component
public class SmartProactiveEngine {
    @EventListener
    public void onMotionDetected(MotionEvent event) {
        LocalTime now = LocalTime.now();
        String userId = event.getUserId();
        
        // ì•„ì¹¨ ì²« ëª¨ì…˜ ê°ì§€
        if (now.getHour() >= 6 && now.getHour() <= 9) {
            if (!hasGreetedToday(userId)) {
                initiateProactiveDialog("morning_greeting", userId);
            }
        }
    }
}

// 3. ê·œì¹™ ì—”ì§„ìœ¼ë¡œ í™•ì¥
@Component
public class RuleBasedProactiveEngine {
    private final List<ProactiveRule> rules = Arrays.asList(
        new ProactiveRule(
            "motion.detected && time.morning && !context.greeted_today",
            "ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”! ${weather.summary}"
        ),
        new ProactiveRule(
            "user.leaving && weather.rain_expected",
            "ìš°ì‚° ì±™ê¸°ëŠ” ê²ƒ ìŠì§€ ë§ˆì„¸ìš”!"
        )
    );
    
    public void evaluateRules(Event event, Context context) {
        rules.stream()
            .filter(rule -> rule.evaluate(event, context))
            .forEach(rule -> executeRule(rule, context));
    }
}
```

## ğŸ”§ ë¯¸ì‹œì  ê°œë°œ ê°€ì´ë“œ

### ê° ì»´í¬ë„ŒíŠ¸ë³„ êµ¬í˜„ ìˆœì„œ

#### 1. Dialog Manager
```
1. HTTP ì—”ë“œí¬ì¸íŠ¸ ìƒì„±
2. ìš”ì²­/ì‘ë‹µ DTO ì •ì˜
3. ê¸°ë³¸ ì‘ë‹µ ë¡œì§
4. Intent ë¶„ì„ í†µí•©
5. Plugin ì‹¤í–‰ ë¡œì§
6. ì—ëŸ¬ ì²˜ë¦¬
7. ë¡œê¹…/ë©”íŠ¸ë¦­
8. ì„±ëŠ¥ ìµœì í™”
```

#### 2. Context Engine
```
1. ë©”ëª¨ë¦¬ ê¸°ë°˜ êµ¬í˜„
2. Redis í†µí•©
3. ì„¸ì…˜ ê´€ë¦¬
4. ìƒíƒœ ì§€ì†ì„±
5. ë§Œë£Œ ì²˜ë¦¬
6. ë™ì‹œì„± ì²˜ë¦¬
```

#### 3. Plugin System
```
1. ì¸í„°í˜ì´ìŠ¤ ì •ì˜
2. ê¸°ë³¸ í”ŒëŸ¬ê·¸ì¸ êµ¬í˜„
3. í”ŒëŸ¬ê·¸ì¸ ë“±ë¡ ë©”ì»¤ë‹ˆì¦˜
4. ì‹¤í–‰ íŒŒì´í”„ë¼ì¸
5. ì—ëŸ¬ ê²©ë¦¬
6. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
```

### ì‹¤ë¬´ ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ë‚ ì”¨ ë¬¸ì˜ ì²˜ë¦¬
```
ì‚¬ìš©ì: "ì˜¤ëŠ˜ ë‚ ì”¨ ì–´ë•Œ?"

1. Raspberry Pi
   - Wake word ê°ì§€ â†’ ìŒì„± ë…¹ìŒ â†’ ì„œë²„ ì „ì†¡

2. Backend ì²˜ë¦¬ íë¦„
   - DialogController ìˆ˜ì‹ 
   - ContextEngine: ì„¸ì…˜ ì»¨í…ìŠ¤íŠ¸ ë¡œë“œ
   - NLU: Intent="weather.query", Entity={date: "today"}
   - PluginManager: WeatherPlugin ì„ íƒ
   - WeatherPlugin: 
     * ì‚¬ìš©ì ìœ„ì¹˜ í™•ì¸ (Context)
     * ë‚ ì”¨ API í˜¸ì¶œ (ìºì‹œ í™•ì¸)
     * ì‘ë‹µ ìƒì„±
   - Response: "ì˜¤ëŠ˜ ì„œìš¸ì€ ë§‘ê³  23ë„ì…ë‹ˆë‹¤"

3. Raspberry Pi
   - TTS ì¬ìƒ
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ì—°ì† ëŒ€í™”
```
ì‚¬ìš©ì: "ë‚´ì¼ì€?"

1. Context í™œìš©
   - ì´ì „ ëŒ€í™”: weather.query
   - ì¶”ë¡ : "ë‚´ì¼ ë‚ ì”¨"ë¥¼ ë¬»ëŠ” ê²ƒ

2. ì²˜ë¦¬
   - Intent: weather.query
   - Entity: {date: "tomorrow"}
   - ì´ì „ ìœ„ì¹˜ ì •ë³´ ì¬ì‚¬ìš©
```

### ë””ë²„ê¹… ì „ëµ

```java
// 1. ìš”ì²­ ì¶”ì 
@Component
public class RequestTracker {
    @EventListener
    public void onRequest(DialogRequestEvent event) {
        log.info("Request: {} -> Intent: {} -> Plugin: {} -> Response: {}",
            event.getRequestId(),
            event.getIntent(),
            event.getPlugin(),
            event.getResponse()
        );
    }
}

// 2. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
@Aspect
@Component
public class PerformanceMonitor {
    @Around("@annotation(Monitored)")
    public Object monitor(ProceedingJoinPoint joinPoint) throws Throwable {
        StopWatch watch = StopWatch.createStarted();
        try {
            return joinPoint.proceed();
        } finally {
            log.info("{} took {}ms", 
                joinPoint.getSignature().getName(), 
                watch.getTime());
        }
    }
}
```

## ğŸ“Š ì§„í–‰ ìƒí™© ì²´í¬í¬ì¸íŠ¸

### Week 2 ì²´í¬
- [ ] End-to-end ì—°ê²° í™•ì¸
- [ ] ê¸°ë³¸ ìš”ì²­/ì‘ë‹µ ë™ì‘
- [ ] ë¡œì»¬ í™˜ê²½ ì™„ì„±

### Week 4 ì²´í¬
- [ ] 3ê°œ ì´ìƒ í”ŒëŸ¬ê·¸ì¸ ë™ì‘
- [ ] ì»¨í…ìŠ¤íŠ¸ ìœ ì§€ í™•ì¸
- [ ] ì—ëŸ¬ ì²˜ë¦¬ êµ¬í˜„

### Week 6 ì²´í¬
- [ ] ì™¸ë¶€ API ì—°ë™
- [ ] ìºì‹± ë™ì‘ í™•ì¸
- [ ] ì„±ëŠ¥ ëª©í‘œ ë‹¬ì„±

### Week 8 ì²´í¬
- [ ] í”„ë¡œì•¡í‹°ë¸Œ ê¸°ëŠ¥ ë™ì‘
- [ ] ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- [ ] ë°°í¬ ì¤€ë¹„ ì™„ë£Œ

## ğŸ¯ ë©˜í† ì˜ ì¡°ì–¸

1. **ì‘ê²Œ ì‹œì‘í•˜ë˜ í™•ì¥ ê°€ëŠ¥í•˜ê²Œ**
   - ì²˜ìŒë¶€í„° ì™„ë²½í•  í•„ìš” ì—†ìŒ
   - ë¦¬íŒ©í† ë§ì€ ìì—°ìŠ¤ëŸ¬ìš´ ê³¼ì •

2. **í…ŒìŠ¤íŠ¸ë¥¼ ì¹œêµ¬ë¡œ**
   - TDDê°€ ì–´ë µë‹¤ë©´ í…ŒìŠ¤íŠ¸ë¥¼ ë‚˜ì¤‘ì—ë¼ë„ ê¼­ ì¶”ê°€
   - í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ì „ì²´ íë¦„ ê²€ì¦

3. **ë¡œê·¸ëŠ” ë¯¸ë˜ì˜ ë‚˜ë¥¼ ìœ„í•œ ì„ ë¬¼**
   - ì ì ˆí•œ ë¡œê·¸ ë ˆë²¨ ì‚¬ìš©
   - êµ¬ì¡°í™”ëœ ë¡œê¹… (JSON)

4. **ì„±ëŠ¥ì€ ì¸¡ì • í›„ ê°œì„ **
   - ì¶”ì¸¡í•˜ì§€ ë§ê³  í”„ë¡œíŒŒì¼ë§
   - ë³‘ëª© ì§€ì  ì°¾ê¸°

5. **ë³´ì•ˆì€ ì²˜ìŒë¶€í„°**
   - ì…ë ¥ ê²€ì¦ì€ í•„ìˆ˜
   - ë¯¼ê° ì •ë³´ ë¡œê¹… ê¸ˆì§€